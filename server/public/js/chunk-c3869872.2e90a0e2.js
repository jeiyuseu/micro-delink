(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3869872"],{"5bea":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("custom-dialog",{attrs:{modal:e.dialog,width:e.maxWidth}},[n("div",{attrs:{slot:"modal-title"},slot:"modal-title"},[e._v("Reloan")]),n("div",{attrs:{slot:"modal-text"},slot:"modal-text"},[n("v-form",{ref:"formReloan",on:{submit:function(t){return t.preventDefault(),e.reloan(t)}}},[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-menu",{ref:"dateOfReleased",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-text-field",e._g(e._b({directives:[{name:"mask",rawName:"v-mask",value:"####-##-##",expression:"'####-##-##'"}],attrs:{label:"* Date of Released","prepend-inner-icon":"mdi-calendar",autocomplete:"off",rules:[function(e){return!!e||"Date of releasaed is required!"}]},model:{value:e.reloanInfo.info.dateOfReleased,callback:function(t){e.$set(e.reloanInfo.info,"dateOfReleased","string"===typeof t?t.trim():t)},expression:"reloanInfo.info.dateOfReleased"}},"v-text-field",o,!1),a))]}}])},[n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.reloanInfo.info.dateOfReleased,callback:function(t){e.$set(e.reloanInfo.info,"dateOfReleased","string"===typeof t?t.trim():t)},expression:"reloanInfo.info.dateOfReleased"}},[n("v-spacer"),n("div",{staticClass:"justify-end"},[n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dateOfReleased.save(e.reloanInfo.info.dateOfReleased)}}},[e._v(" OK ")])],1)],1)],1)],1),n("v-col",{attrs:{cols:"6"}},[n("v-select",{attrs:{items:[{desc:"18 Weeks",value:18},{desc:"24 Weeks",value:24}],"item-text":"desc","item-value":"value","prepend-inner-icon":"mdi-view-week",rules:[function(e){return!!e||"Loan Term is required!"}],label:"* Loan Term"},on:{change:e.loanTerm},model:{value:e.reloanInfo.info.weeksToPay,callback:function(t){e.$set(e.reloanInfo.info,"weeksToPay",t)},expression:"reloanInfo.info.weeksToPay"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-menu",{ref:"dateOfFirstPayment",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[n("v-text-field",e._g(e._b({directives:[{name:"mask",rawName:"v-mask",value:"####-##-##",expression:"'####-##-##'"}],attrs:{label:"* Date of First Payment",rules:[function(e){return!!e||"Date of First Payment is required!"}],autocomplete:"off","prepend-inner-icon":"mdi-calendar"},model:{value:e.reloanInfo.info.dateOfFirstPayment,callback:function(t){e.$set(e.reloanInfo.info,"dateOfFirstPayment",t)},expression:"reloanInfo.info.dateOfFirstPayment"}},"v-text-field",o,!1),a))]}}])},[n("v-date-picker",{attrs:{"no-title":"",scrollable:""},on:{change:e.loanTerm},model:{value:e.reloanInfo.info.dateOfFirstPayment,callback:function(t){e.$set(e.reloanInfo.info,"dateOfFirstPayment",t)},expression:"reloanInfo.info.dateOfFirstPayment"}},[n("v-spacer"),n("div",{staticClass:"justify-end"},[n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dateOfFirstPayment.save(e.reloanInfo.info.dateOfFirstPayment)}}},[e._v(" OK ")])],1)],1)],1)],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{attrs:{label:"* Date of Last Payment",autocomplete:"off",rules:[function(e){return!!e||"Date of Last Payment is required!"}],"prepend-inner-icon":"mdi-calendar",readonly:""},model:{value:e.reloanInfo.info.dateOfLastPayment,callback:function(t){e.$set(e.reloanInfo.info,"dateOfLastPayment",t)},expression:"reloanInfo.info.dateOfLastPayment"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{attrs:{label:"* Client 1",items:e.clientInfo,readonly:"","item-value":"uuid","prepend-inner-icon":"mdi-account-plus",rules:[function(e){return!!e||"Client 1 is required!"}],"item-text":function(e){return(e.clientInfo.firstName+" "+e.clientInfo.lastName).toUpperCase()}},model:{value:e.reloanInfo.client.client1.clientId,callback:function(t){e.$set(e.reloanInfo.client.client1,"clientId",t)},expression:"reloanInfo.client.client1.clientId"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{staticClass:"branch-name",attrs:{label:"* Loan Amount",required:"",rules:[function(e){return!!e||"Loan Amount is required!"}],type:"number","prepend-inner-icon":"mdi-currency-php",autocomplete:"off"},model:{value:e.reloanInfo.client.client1.loanAmount,callback:function(t){e.$set(e.reloanInfo.client.client1,"loanAmount",e._n(t))},expression:"reloanInfo.client.client1.loanAmount"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{attrs:{label:"* Client 2",readonly:"",items:e.clientInfo,"item-value":"uuid",rules:[function(e){return!!e||"Client 2 is required!"}],"prepend-inner-icon":"mdi-account-plus","item-text":function(e){return(e.clientInfo.firstName+" "+e.clientInfo.lastName).toUpperCase()}},model:{value:e.reloanInfo.client.client2.clientId,callback:function(t){e.$set(e.reloanInfo.client.client2,"clientId",t)},expression:"reloanInfo.client.client2.clientId"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-text-field",{staticClass:"branch-name",attrs:{label:"* Loan Amount","prepend-inner-icon":"mdi-currency-php",autocomplete:"off",rules:[function(e){return!!e||"Loan Amount is required!"}],type:"number"},model:{value:e.reloanInfo.client.client2.loanAmount,callback:function(t){e.$set(e.reloanInfo.client.client2,"loanAmount",e._n(t))},expression:"reloanInfo.client.client2.loanAmount"}})],1)],1)],1),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{attrs:{color:"primary darken-1",text:""},on:{click:function(t){e.dialog=!e.dialog,e.$refs.formReloan.reset()}}},[e._v(" Close ")]),n("v-btn",{attrs:{color:"primary darken-1",loading:e.btnReloan,type:"submit",text:""}},[e._v(" Reloan ")])],1)],1)],1)]),n("card",[n("div",{attrs:{slot:"card-title"},slot:"card-title"},[e._v(" Completed Accounts ")]),n("div",{attrs:{slot:"card-text"},slot:"card-text"},[n("v-card-title",[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search gp2 code or client name...","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-data-table",{staticClass:"elevation-2",attrs:{headers:e.headers,items:e.GP2_GETT_DATA_COMPLETED.gp2Info,expanded:e.expanded,"single-expand":!0,"item-key":"uuid"},on:{"update:expanded":function(t){e.expanded=t}},scopedSlots:e._u([{key:"item",fn:function(t){var a=t.item,o=t.expand,i=t.isExpanded;return[n("tr",{staticClass:"blue darken-4 white--text"},[n("td",[e._v(e._s(a.id))]),n("td",[e._v(e._s(e.moment().diff(a.dateOfFirstPayment,"weeks")))]),n("td",[e._v(e._s(a.weeksToPay)+" Weeks")]),n("td",[e._v(e._s(e.moment(a.dateOfReleased).format("MMMM DD, YYYY")))]),n("td",[e._v(e._s(e.moment(a.dateOfFirstPayment).format("MMMM DD, YYYY")))]),n("td",[e._v(e._s(e.moment(a.dateOfLastPayment).format("MMMM DD, YYYY")))]),n("td",{staticClass:"text-center"},[n("v-icon",{staticClass:"mr-4",attrs:{dark:""},on:{click:function(t){o(!i),e.show=!e.show}}},[e._v(" "+e._s(i?"mdi-arrow-right":"mdi-arrow-down"))]),n("v-icon",{attrs:{dark:""},on:{click:function(t){e.dialog=!e.dialog,e.reloanInfos(a)}}},[e._v(" mdi-autorenew")])],1)])]}},{key:"expanded-item",fn:function(t){var a=t.item;return[n("tr",{staticClass:"grey lighten-3"},[n("th",[e._v("Client Name")]),n("th",[e._v("LR")]),n("th",[e._v("SK CUM")]),n("th",[e._v("W.I")]),n("th",[e._v("Past Due")]),n("th",[e._v("Updated By")]),n("th",{staticClass:"text-center"})]),e._l(a.gp2Clients,(function(t,a){return n("tr",{key:a},[n("td",[e._v(" "+e._s(a+1)+". "+e._s((t.clientInfo.firstName+" "+t.clientInfo.middleInitial+" "+t.clientInfo.lastName).toUpperCase())+" ")]),n("td",[e._v("₱ "+e._s(t.lr.toLocaleString()))]),n("td",[e._v("₱ "+e._s(t.skCum.toLocaleString()))]),n("td",[e._v("₱ "+e._s(t.wi.toLocaleString()))]),n("td",[e._v("₱ "+e._s(t.pastDue.toLocaleString()))]),n("td",[e._v(" "+e._s(null!==t.userInfo?(t.userInfo.firstName+" "+t.userInfo.lastName).toUpperCase():"")+" "+e._s(null!==t.userInfo&&e.moment(t.updatedAt).fromNow()?" | "+e.moment(t.updatedAt).fromNow():"")+" ")]),n("td",{staticClass:"text-center"})])})),n("tr",[n("td",{staticClass:"font-weight-black"}),n("td",[e._v(" ₱ "+e._s(a.totals.lr.toLocaleString())+" ")]),n("td",[e._v(" ₱ "+e._s(a.totals.skCum.toLocaleString())+" ")]),n("td",[e._v(" ₱ "+e._s(a.totals.wi.toLocaleString())+" ")]),n("td",[e._v(" ₱ "+e._s(a.totals.pastDue.toLocaleString())+" ")])])]}}])})],1)])],1)},o=[],i=(n("99af"),n("fb6a"),n("96cf"),n("1da1")),l=n("5530"),r=n("ae8d"),s=n("3f7a"),c=n("2f62"),d={data:function(){return{show:!1,expanded:[],dialog:!1,maxWidth:"700px",search:"",errors:[],btnReloan:!1,headers:[{text:"Code #",align:"start",sortable:!1,value:"codeName"},{text:"Week #",align:"start",sortable:!1,value:"dateOfFirstPayment"},{text:"Loan Term",align:"start",sortable:!1,value:"weeksToPay"},{text:"Date of Released",align:"start",sortable:!1,value:"dateOfReleased"},{text:"Date of First Payment",align:"start",sortable:!1,value:"dateOfFirstPayment"},{text:"Date of Last Payment",align:"start",sortable:!1,value:"dateOfLastPayment"},{text:"Action",align:"center"}],reloanInfo:{info:{id:"",dateOfReleased:"",dateOfFirstPayment:"",dateOfLastPayment:"",weeksToPay:""},client:{client1:{clientId:"",loanAmount:""},client2:{clientId:"",loanAmount:""}}},clientInfo:{}}},components:{Card:r["a"],CustomDialog:s["a"]},methods:Object(l["a"])(Object(l["a"])({},Object(c["b"])({GP2_RELOAN:"gp2/GP2_RELOAN",GP2_GET_DATA_COMPLETED:"gp2/GP2_GET_DATA_COMPLETED"})),{},{reloanInfos:function(e){this.info=e,this.reloanInfo.info.id=e.uuid,this.clientInfo=e.gp2Clients,this.reloanInfo.client.client1.clientId=e.gp2Clients[0].uuid,this.reloanInfo.client.client2.clientId=e.gp2Clients[1].uuid},reloan:function(){var e=this;this.$refs.formReloan.validate()&&(this.btnReloan=!0,this.GP2_RELOAN({codename:this.$route.params.codename,payload:this.reloanInfo}).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=n.data,t.next=3,e.GP2_GET_DATA_COMPLETED(e.$route.params.codename);case 3:e.dialog=!1,e.btnReloan=!1,e.$toast.success(a.msg.toUpperCase());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.log(t),e.btnReloan=!1,e.$toast.error("Something went wrong...")})))},loanTerm:function(){if(18===this.reloanInfo.info.weeksToPay){var e=new Date(this.reloanInfo.info.dateOfFirstPayment);e.setDate(e.getDate()+126);var t="0"+(e.getMonth()+1),n="0"+e.getDate(),a=e.getFullYear();this.reloanInfo.info.dateOfLastPayment=a?"".concat(a,"-").concat(t.slice(-2),"-").concat(n.slice(-2)):""}else if(24===this.reloanInfo.info.weeksToPay){var o=new Date(this.reloanInfo.info.dateOfFirstPayment);o.setDate(o.getDate()+168);var i="0"+(o.getMonth()+1),l="0"+o.getDate(),r=o.getFullYear();this.reloanInfo.info.dateOfLastPayment=r?"".concat(r,"-").concat(i.slice(-2),"-").concat(l.slice(-2)):""}}}),computed:Object(l["a"])({},Object(c["c"])({GP2_GETT_DATA_COMPLETED:"gp2/GP2_GETT_DATA_COMPLETED",AUTH_GETT_USER:"auth/AUTH_GETT_USER"}))},f=d,u=n("2877"),m=Object(u["a"])(f,a,o,!1,null,null,null);t["default"]=m.exports},fb6a:function(e,t,n){"use strict";var a=n("23e7"),o=n("861d"),i=n("e8b5"),l=n("23cb"),r=n("50c4"),s=n("fc6a"),c=n("8418"),d=n("b622"),f=n("1dde"),u=n("ae40"),m=f("slice"),v=u("slice",{ACCESSORS:!0,0:0,1:2}),p=d("species"),_=[].slice,y=Math.max;a({target:"Array",proto:!0,forced:!m||!v},{slice:function(e,t){var n,a,d,f=s(this),u=r(f.length),m=l(e,u),v=l(void 0===t?u:t,u);if(i(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?o(n)&&(n=n[p],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return _.call(f,m,v);for(a=new(void 0===n?Array:n)(y(v-m,0)),d=0;m<v;m++,d++)m in f&&c(a,d,f[m]);return a.length=d,a}})}}]);
//# sourceMappingURL=chunk-c3869872.2e90a0e2.js.map